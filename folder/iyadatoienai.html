<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <title>イヤだと言えない地味系少女シリーズ</title>
  <style>
    /* 全体の基本 */
body {
  background-color: pink;
  margin: 0;
  font-family: sans-serif;
}

h1 {
  text-align: center;
}

label{
  font-size: 30px;
}

select{
  width: 300px;
  height: 40px;
  font-size: 30px;
}

/* 漫画カード全体のレイアウト */
.comics {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 10px;
}

/* リンク装飾なし */
a {
  text-decoration: none;
  color: inherit;
}

/* 画像 */
.comic-img {
  width: 100%;
  height: 450px;
  object-fit: cover;
  display: block;
  border-radius: 8px;
}

/* グループ用の枠 */
.highlight-group {
  border: 4px solid #000;
  box-sizing: border-box;
}

/* 漫画カード本体 */
.comic-card {
  position: relative;
  display: inline-block;
  width: 280px;       /* デフォルトPC幅 */
  box-sizing: border-box; /* paddingやborderを幅に含める */
}

/* 画像下に重ねるタイトル・作者 */
.comic-title {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;              /* 画像幅に合わせる */
  background: rgba(0, 0, 0, 0.65); /* 半透明背景 */
  color: #fff;
  padding: 8px;
  box-sizing: border-box;
  text-align: left;
  display: flex;
  flex-direction: column; /* タイトルと作者を縦に並べる */
}

/* タイトル */
.comic-title .title {
  font-weight: bold;
  margin: 0 0 2px 0;
  white-space: nowrap;       /* 省略表示 */
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 作者名 */
.comic-title .author {
  font-size: 12px;
  opacity: 0.85;
  margin: 0;
  white-space: nowrap;       /* 省略表示 */
  overflow: hidden;
  text-overflow: ellipsis;
}

/* スマホ対応 */
@media (max-width: 600px) {
  select {
    width: 100%;
    font-size: 20px;
    padding: 12px;
  }

  .comic-card {
    width: 100%; /* 横幅いっぱい */
  }

  .comic-title {
    font-size: 16px;
    padding: 10px;
  }

  .comic-title .title {
    font-size: 16px;
  }

  .comic-title .author {
    font-size: 14px;
  }
}

  </style>
</head>

<body>
  <a class="pagetop" href="#">
    <div class="pagetop__arrow"></div>
  </a>

  <a href="https://yasha84.github.io/Hmanga/">
        <h1>トップへ戻る</h1>
    </a>

  <label for="dropdown">並び替え:</label>
  <select id="dropdown"></select>

  <label for="search">タグ検索</label>
  <select id="search"></select>

  <div id="box" class="comics"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const dropdownSelect = document.getElementById("dropdown");
      const sortOptions = [
        { value: "default", text: "デフォルト" },
        { value: "name", text: "作品名順" },
        { value: "auther", text: "作者名順" }
      ];
      sortOptions.forEach(option => {
        const optionElement = document.createElement("option");
        optionElement.value = option.value;
        optionElement.textContent = option.text;
        dropdownSelect.appendChild(optionElement);
      });

      const searchSelect = document.getElementById("search");
      const searchOptions = [
        { value: "all", text: "すべて" },
        { value: "boy", text: "男攻め" },
        { value: "girl", text: "女攻め" },
        { value: "both", text: "男女攻め" },
        { value: "oneshota", text: "おねショタ" },
        { value: "hitomi", text: "hitomi" },
        { value: "none", text: "hitomi以外" },
        { value: "bath", text: "風呂" },
        { value: "water", text: "プール、海" },
        { value: "school", text: "学校" },
      ];
      searchOptions.forEach(option => {
        const optionElement = document.createElement("option");
        optionElement.value = option.value;
        optionElement.textContent = option.text;
        searchSelect.appendChild(optionElement);
      });

      const tableElement = document.getElementById("box");
      const authorSelect = document.getElementById("search");
      const sortSelect = document.getElementById("dropdown");

            const comics = [

                ["イヤだと言えない地味系少女と田舎の叔父さん",
                    "https://hitomi.la/reader/2343134.html#1",
                    "https://livedoor.blogimg.jp/z2qdee4ylnia/imgs/8/8/88de30cf.jpg",
                    "F宅",
                    ["boy", "hitomi"]
                ],

                ["イヤだと言えない地味系少女と田舎の叔父さん2",
                    "https://hitomi.la/reader/2700003.html#1",
                    "https://ecdnimg.toranoana.jp/ec/img/04/0031/09/64/040031096489-1p.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath"]
                ],

                ["イヤだと言えない地味系少女と田舎の叔父さん3",
                    "https://hitomi.la/reader/3226118.html#1",
                    "https://ecdnimg.toranoana.jp/ec/img/04/0031/21/68/040031216836-1p.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath"]
                ],

                ["イヤだと言えない地味系少女と田舎の叔父さん4",
                    "https://hitomi.la/reader/3566051.html#1",
                    "https://ecdnimg.toranoana.jp/ec/img/04/0031/26/50/040031265004-1p.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath"]
                ],

                ["イヤだと言えない地味系少女とあかすりエステ",
                    "https://hitomi.la/reader/2139405.html#1",
                    "https://melonbooks.akamaized.net/user_data/packages/resize_image.php?image=232000000448.jpg",
                    "F宅",
                    ["boy", "hitomi"]
                ],

                ["イヤだと言えない地味系少女修学旅行総集編",
                    "https://hitomi.la/reader/2126231.html#1",
                    "https://ebook-assets.dmm.co.jp/digital/e-book/b164aisis04639/b164aisis04639pl.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath", "school"]
                ],

                ["イヤだと言えない地味系少女と貸切温泉",
                    "https://hitomi.la/reader/2819368.html#1",
                    "https://bookmate-net.com/up/ec/pkg/lg_43_20240116101523_fe3a52.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath"]
                ],

                ["イヤだと言えない地味系少女と混浴温泉",
                    "https://hitomi.la/reader/1333306.html#1",
                    "https://ecdnimg.toranoana.jp/ec/img/04/0030/64/17/040030641726-1p.jpg",
                    "F宅",
                    ["boy", "hitomi", "bath"]
                ],

                

            ];

            let currentFilter = "all";
      let currentSort = "default";

      const callback = function ([name, link, image, author, tags]) {
        const hasgroup = tags.includes("group");
        const className = `comic-img${hasgroup ? ' highlight-group' : ''}`;
        return `
          <a href="${link}" target="_blank" title="${name}" class="comic-card">
            <img src="${image}" alt="${name}" class="${className}" />
            <div class="comic-title">
              <p class="title">${name}</p>
              <p class="author">${author}</p>
            </div>
          </a>
        `;
      };

      const getFilteredSortedData = () => {
        let filtered = currentFilter === "all"
          ? [...comics]
          : comics.filter(comic => {
            if (currentFilter === "none") return !comic[4].includes("hitomi");
            return comic[4].includes(currentFilter);
          });

        if (currentSort === "name") filtered.sort((a, b) => a[0].localeCompare(b[0], "ja"));
        else if (currentSort === "auther") filtered.sort((a, b) => a[3].localeCompare(b[3], "ja"));

        return filtered;
      };

      const render = () => {
        const data = getFilteredSortedData();
        tableElement.innerHTML = data.map(callback).join("");
      };

      authorSelect.addEventListener("change", () => {
        currentFilter = authorSelect.value;
        render();
      });

      sortSelect.addEventListener("change", () => {
        currentSort = sortSelect.value;
        render();
      });

      render();
    });
  </script>
</body>

</html>
