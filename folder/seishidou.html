<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <title>性指導員のお仕事</title>
    <style>
        body {
            background-color: pink;
        }

        h1 {
            text-align: center;
        }

        .comics {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        a {
            text-decoration: none;
            color: black;
        }

        .comic-img {
            width: 300px;
            height: 450px;
            object-fit: cover;
            display: block;
            border-radius: 8px;
        }

        .highlight-group {
            border: 4px solid #000;
            /* グループ用の枠 */
            box-sizing: border-box;
        }

        /* その他既存スタイル */
        .pagetop {
            height: 125px;
            width: 125px;
            position: fixed;
            right: 30px;
            bottom: 30px;
            background: #fff;
            border: solid 2px #000;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        .pagetop__arrow {
            height: 30px;
            width: 30px;
            border-top: 3px solid #000;
            border-right: 3px solid #000;
            transform: translateY(20%) rotate(-45deg);
        }
    </style>
</head>


<body>
    <a class="pagetop" href="#">
        <div class="pagetop__arrow"></div>
    </a>

    <a href="https://yasha84.github.io/Hmanga/">
        <h1>トップへ戻る</h1>
    </a>


    <label for="dropdown">並び替え:</label>
    <select id="dropdown"></select>


    <label for="search">タグ検索</label>
    <select id="search"></select>


    <div id="box" class="comics"></div>

    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const dropdownSelect = document.getElementById("dropdown");

            const sortOptions = [
                { value: "default", text: "デフォルト" },
                { value: "name", text: "作品名順" },
                { value: "auther", text: "作者名順" }
            ];

            sortOptions.forEach(option => {
                const optionElement = document.createElement("option");
                optionElement.value = option.value;
                optionElement.textContent = option.text;
                dropdownSelect.appendChild(optionElement);
            });
        });



        document.addEventListener("DOMContentLoaded", function () {
            const searchSelect = document.getElementById("search");

            const searchOptions = [
                { value: "all", text: "すべて" },
                { value: "boy", text: "男攻め" },
                { value: "girl", text: "女攻め" },
                { value: "both", text: "男女攻め" },
                { value: "oneshota", text: "おねショタ" },
                { value: "hitomi", text: "hitomi" },
                { value: "none", text: "hitomi以外" },
                { value: "bath", text: "風呂" },
                { value: "water", text: "プール、海" },
                { value: "school", text: "学校" },
                { value: "???", text: "???" }
            ];

            searchOptions.forEach(option => {
                const optionElement = document.createElement("option");
                optionElement.value = option.value;
                optionElement.textContent = option.text;
                searchSelect.appendChild(optionElement);
            });
        });


        document.addEventListener("DOMContentLoaded", function () {
            const tableElement = document.getElementById("box");
            const authorSelect = document.getElementById("search");
            const sortSelect = document.getElementById("dropdown");

            const comics = [

                ["性指導員のお仕事",
                    "https://hitomi.la/reader/1818770.html#1",
                    "https://image.yodobashi.com//product/100/000/086/601/576/265/100000086601576265_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ],

                ["性指導員のお仕事2",
                    "https://hitomi.la/reader/1924338.html#1",
                    "https://image.yodobashi.com//product/100/000/086/601/576/266/100000086601576266_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ],

                ["性指導員のお仕事3",
                    "https://hitomi.la/reader/2072195.html#1",
                    "https://image.yodobashi.com//product/100/000/086/601/675/994/100000086601675994_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ],

                ["性指導員のお仕事4 前編",
                    "https://hitomi.la/reader/2255269.html#1",
                    "https://image.yodobashi.com//product/100/000/086/602/235/991/100000086602235991_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ],

                ["性指導員のお仕事4 後編",
                    "https://hitomi.la/reader/2443877.html#1",
                    "https://image.yodobashi.com//product/100/000/086/602/235/992/100000086602235992_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ],

                ["性指導員のお仕事5",
                    "https://hitomi.la/reader/2805147.html#1",
                    "https://image.yodobashi.com//product/100/000/086/602/447/412/100000086602447412_10204.jpg",
                    "暗中模索",
                    ["boy", "school", "hitomi",]
                ]

            ];

            let currentFilter = "all";
            let currentSort = "default";

            const callback = function ([name, link, image, author, tags]) {
                const hasgroup = tags.includes("group");
                const className = `comic-img${hasgroup ? ' highlight-group' : ''}`;

                return `
          <a href="${link}" target="_blank" title="${name}">
            <img src="${image}" alt="${name}" class="${className}" />
          </a>
        `;
            };

            const getFilteredSortedData = () => {
                let filtered = currentFilter === "all"
                    ? [...comics]
                    : comics.filter(comic => {
                        if (currentFilter === "none") {
                            // 特定のタグが付いていない場合
                            return !comic[4].includes("hitomi");
                        }
                        return comic[4].includes(currentFilter); // 通常のタグ絞り込み
                    });

                if (currentSort === "name") {
                    filtered.sort((a, b) => a[0].localeCompare(b[0], "ja"));
                } else if (currentSort === "auther") {
                    filtered.sort((a, b) => a[3].localeCompare(b[3], "ja"));
                }

                return filtered;
            };

            const render = () => {
                const data = getFilteredSortedData();
                tableElement.innerHTML = data.map(callback).join("");
            };

            authorSelect.addEventListener("change", () => {
                currentFilter = authorSelect.value;
                render();
            });

            sortSelect.addEventListener("change", () => {
                currentSort = sortSelect.value;
                render();
            });

            render();


        });


    </script>
</body>

</html>
